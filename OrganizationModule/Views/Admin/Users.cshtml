<div ng-app="" ng-controller="adminUsersController" id="users">

    <strong class="error">{{ viewModel.ErrorMessage }}</strong>
    <strong class="error">{{ viewModel.Success }}</strong>

    <h3>UŻYTKOWNICY AKTYWNI</h3>

    <div class="row">
        <div class="col-xs-12">
            <div class="user-header clearfix">
                <div>NAZWA UŻYTKOWNIKA</div>
                <div>ADRES E-MAIL</div>
                <div>ROLA</div>
                <div>STATUS</div>
                <div>EDYTUJ</div>
                <div>USUŃ</div>
            </div>
            <div ng-repeat="person in viewModel.People" class="user-content">
                <div class="info-row clearfix">
                    <div>{{ person.DisplayName }}</div>
                    <div>{{ person.Email }}</div>
                    <div>{{ person.ProfileName }}</div>
                    <div>{{ person.selectedStatus }}</div>
                    <div><button class="glyphicon glyphicon-pencil squared-btn empty-green-button" ng-hide="person.isEditable" ng-click="showEdit(person)"></button></div>
                    <div><button class="glyphicon glyphicon-remove squared-btn empty-purple-button" ng-hide="person.isEditable" ng-click="delete(person)"></button></div>
                </div>
                <div class="user-edit-row clearfix">
                    <div class="clearfix">
                        <div><input class="form-control" type="text" id="mainInput" name="person.DisplayName" ng-model="person.DisplayName" ng-show="person.isEditable"></div>
                        <div></div>
                        <div><button class="btn btn-input-s green-button" ng-show="person.isEditable" ng-click="save(person)">ZATWIERDŹ ZMIANY</button></div>
                    </div>
                    <div class="clearfix">
                        <div><input class="form-control" type="text" id="mainInput" name="person.Email" ng-model="person.Email" ng-show="person.isEditable"></div>
                        <div>
                            <select class="select-m select-green form-control" ng-model="person.selectedStatus" ng-options="c for c in availableStatus" ng-show="person.isEditable" ng-change="changeStatus(person)">
                                @*<option value="">{{ person.Status.Name }}</option>*@
                            </select>
                        </div>
                        <div><button class="btn btn-input-s empty-green-button" ng-show="person.isEditable" ng-click="cancel(person)">ANULUJ</button></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div ng-repeat="person in viewModel.People">

        


        @*<div class="row">
            <div id="mainText" ng-hide="person.isEditable">
                {{ person.DisplayName }}
            </div>
            <input type="text" id="mainInput" name="person.DisplayName" ng-model="person.DisplayName" ng-show="person.isEditable">
            <button ng-hide="person.isEditable" ng-click="delete(person)">
                USUN
            </button>
            <button  ng-hide="person.isEditable" ng-click="showEdit(person)">
                EDYCJA
            </button>
            <button  ng-show="person.isEditable" ng-click="save(person)">
                ZAPISZ
            </button>
            <button ng-show="person.isEditable" ng-click="cancel(person)">
                ANULUJ ZMIANY
            </button>
        </div>*@
        @*<div class="row">
            <div id="detailText" ng-hide="person.isEditable">
                {{ person.Email }}
            </div>
            <input type="text" id="mainInput" name="person.Email" ng-model="person.Email" ng-show="person.isEditable">
            <div id="detailText" ng-hide="person.isEditable">
                {{ person.selectedStatus }}
            </div>
            <select ng-model="person.selectedStatus" ng-options="c for c in availableStatus" ng-show="person.isEditable" ng-change="changeStatus(person)">
                @*<option value="">{{ person.Status.Name }}</option>
            </select>

            <select ng-model="person.ProfileName" ng-options="c for c in availableProfiles" ng-show="person.isEditable" ng-change="changeProfile(person)">
                @*<option value="">{{ person.Status.Name }}</option>
            </select>
            <div id="detailText">
                {{ person.RegistrationDate | date: 'dd.MM.yyyy HH.mm' }}
            </div>
            <div id="detailText">
                {{ person.LastActivationDate | date: 'dd.MM.yyyy HH.mm' }}
            </div>
            <div id="detailText">
                {{ person.ProfileName }}
            </div>
            <div id="detailText">

                <div ng-repeat="group in person.AssignedGroups">
                    {{ group.GroupName }} ,
                </div>
            </div>
            <div id="detailText">
                {{ person.UserName }}
            </div>
        </div>*@
        <div class="row">
            <div id="mainText">
                Kursy ({{ person.TrainingNumber }})
            </div>
            <button ng-click="showDetails = ! showDetails" ng-show="!showDetails">
                POKAZ
            </button>
            <button ng-click="showDetails = ! showDetails" ng-show="showDetails">
                UKRYJ
            </button>
        </div>

        <div class="row" ng-show="showDetails">
            <div ng-repeat="item in person.AssignedTrainings">
                <div class="row">
                    <div id="detailText">
                        {{ item.Id }}
                    </div>
                    <div id="detailText">
                        {{ item.StartDate | date: 'dd.MM.yyyy HH.mm' }}
                    </div>
                    <div id="detailText" ng-hide="{{item.IsCompleted}}">
                        W trakcie
                    </div>
                    <div id="detailText">
                        {{ item.EndDate | date: 'dd.MM.yyyy HH.mm'}}
                    </div>
                    <div ng-show="{{item.IsCompleted}}">
                        {{item.Result}}
                    </div>
                </div>
            </div>
        </div>

    </div>
    <button  ng-click="showDeleted = ! showDeleted" ng-show="!showDeleted">
        POKAZ USUNIETE
    </button>
    <button  ng-click="showDeleted = ! showDeleted" ng-show="showDeleted">
        UKRYJ USUNIETE
    </button>

    <div class="row" ng-show="showDeleted">
        <div id="mainText">
            Uzytkowanicy usunieci
        </div>
        <div ng-repeat="person in viewModel.DeletedPeople">

            <div class="row">
                <div id="mainText">
                    {{ person.DisplayName }}
                </div>
            </div>
            <div class="row">
                <div id="detailText">
                    {{ person.RegistrationDate | date: 'dd.MM.yyyy HH.mm' }}
                </div>
                <div id="detailText">
                    {{ person.DeletedDate | date: 'dd.MM.yyyy HH.mm' }}
                </div>
                <div id="detailText">
                    {{ person.DeletedUserID }}
                </div>
            </div>
        </div>
    </div>
</div>
@Styles.Render("~/Users")
